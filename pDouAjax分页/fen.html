<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Title</title>
    <link rel="stylesheet" href="public/css/app.css">

</head>
<body>


<div class="my_account">
    <div class="my_Account row">
        <div class="my_accountRight">
            <div class="my_account01 navDis" id="my_account02" style="display: none;">
                <div class="my_account06Top border1px">
                    <div class="topmasger"><span></span>&nbsp; 我的投资</div>
                    <div class="row chickbox color3">
                        <div class="left font_14">累计投资 <span class="color_pink font_25">10.00</span></div>
                        <div class="right font_14">累计收益 <span class="colorNum font_25">10.00</span></div>
                    </div>
                </div>
                <div class="row height50">
                    <div class="left text-left" style="width: 80px;">选择类型</div>
                    <div class="left  inline_list money_item_list">
                        <ul id="moneyTag">
                            <li class="bgOrange">进行中</li>
                            <li date-pagination='1' id="t1">回款中</li>
                            <li date-pagination="2" id="t2">已结束</li>
                        </ul>
                    </div>
                </div>
                <div id="tagList">
                    <div class="moneyTags">
                        <div class="height56 font_weight">
                            投标中
                        </div>
                        <div class="ulLeft_list ulLeft_listTop  color6">
                            <ul>
                                <li>标的信息</li>
                                <li>投资本金</li>
                                <li>投资期限</li>
                                <li>预期收益</li>
                            </ul>
                        </div>
                        <div class="ulLeft_list ulLeft_listHeight58  color3" style="height:302px;overflow: hidden">
                            <ul>
                                <li>
                                    <div class="deco">定宝1020</div>
                                    <div>3个月·12%·先息后本</div>
                                </li>
                                <li>1</li>
                                <li>1</li>
                                <li>1</li>
                            </ul>
                            <ul>
                                <li>
                                    <div class="deco">定宝1020</div>
                                    <div>3个月·12%·先息后本</div>
                                </li>
                                <li>1</li>
                                <li>1</li>
                                <li>1</li>
                            </ul>

                        </div>
                        <p style="line-height: 25px;font-size: 14px;color: #666666;text-align: right;" class="showDown">
                            展开查看全部 <img src="public/images/more_sin_diso.png" alt="" style="vertical-align: middle"></p>
                        <div class="height56 font_weight">转让中</div>
                        <div class="ulLeft_list ulLeft_listTop width185px  color6">
                            <ul>
                                <li>标的信息</li>
                                <li>投资本金</li>
                                <li>可转让份数</li>
                                <li>已转让份数</li>
                                <li></li>
                            </ul>
                        </div>
                        <div class="ulLeft_list width187ul width185px ulLeft_listHeight58"
                             style="height:302px;overflow: hidden">
                            <ul>
                                <li>
                                    <div class="deco">定宝1020</div>
                                    <div>3个月·12%·先息后本</div>
                                </li>
                                <li>1</li>
                                <li>1</li>
                                <li>1</li>
                                <li><span class="yellowNum">取消转让</span></li>
                            </ul>
                            <ul>
                                <li>
                                    <div class="deco">定宝1020</div>
                                    <div>3个月·12%·先息后本</div>
                                </li>
                                <li>1</li>
                                <li>1</li>
                                <li>1</li>
                                <li><span class="yellowNum">取消转让</span></li>
                            </ul>
                            <ul>
                                <li>
                                    <div class="deco">定宝1020</div>
                                    <div>3个月·12%·先息后本</div>
                                </li>
                                <li>1</li>
                                <li>1</li>
                                <li>1</li>
                                <li><span class="yellowNum">取消转让</span></li>
                            </ul>
                            <ul>
                                <li>
                                    <div class="deco">定宝1020</div>
                                    <div>3个月·12%·先息后本</div>
                                </li>
                                <li>1</li>
                                <li>1</li>
                                <li>1</li>
                                <li><span class="color9">取消转让</span></li>
                            </ul>
                            <ul>
                                <li>
                                    <div class="deco">定宝1020</div>
                                    <div>3个月·12%·先息后本</div>
                                </li>
                                <li>1</li>
                                <li>1</li>
                                <li>1</li>
                                <li><span class="yellowNum">取消转让</span></li>
                            </ul>
                            <ul>
                                <li>
                                    <div class="deco">定宝1020</div>
                                    <div>3个月·12%·先息后本</div>
                                </li>
                                <li>1</li>
                                <li>1</li>
                                <li>1</li>
                                <li><span class="yellowNum">取消转让</span></li>
                            </ul>
                            <ul>
                                <li>
                                    <div class="deco">定宝1020</div>
                                    <div>3个月·12%·先息后本</div>
                                </li>
                                <li>1</li>
                                <li>1</li>
                                <li>1</li>
                                <li><span class="yellowNum">取消转让</span></li>
                            </ul>
                            <ul>
                                <li>
                                    <div class="deco">定宝1020</div>
                                    <div>3个月·12%·先息后本</div>
                                </li>
                                <li>1</li>
                                <li>1</li>
                                <li>1</li>
                                <li><span class="yellowNum">取消转让</span></li>
                            </ul>
                            <ul>
                                <li>
                                    <div class="deco">定宝1020</div>
                                    <div>3个月·12%·先息后本</div>
                                </li>
                                <li>1</li>
                                <li>1</li>
                                <li>1</li>
                                <li><span class="yellowNum">取消转让</span></li>
                            </ul>
                            <ul>
                                <li>
                                    <div class="deco">定宝1020</div>
                                    <div>3个月·12%·先息后本</div>
                                </li>
                                <li>1</li>
                                <li>1</li>
                                <li>1</li>
                                <li><span class="yellowNum">取消转让</span></li>
                            </ul>
                        </div>
                        <p style="line-height: 25px;font-size: 14px;color: #666666;text-align: right" class="showDown">
                            展开查看全部 <img src="public/images/more_sin_diso.png" style="vertical-align: middle"></p>
                    </div>
                    <div class="moneyTags" style="display: none">
                        <div class="height56 font_weight">
                            回款中
                        </div>
                        <div class="ulLeft_list width187ul ulLeft_listWidth115  ulLeft_listTop  color6">
                            <ul>
                                <li>标的信息</li>
                                <li>投资本金</li>
                                <li>待回款</li>
                                <li>已回款</li>
                                <li>下次汇款时间</li>
                                <li>到期时间</li>
                                <li></li>
                            </ul>
                        </div>
                        <div class="ulLeft_list width187ul ulLeft_listHeight83 ulLeft_listWidth115  " id="1">
                            <ul>
                                <li>
                                    <div class="deco">定宝1020</div>
                                    <div>3个月·12%·先息后本</div>
                                </li>
                                <li>1</li>
                                <li>1</li>
                                <li>1</li>
                                <li>1</li>
                                <li>1</li>
                                <li>
                                    <div class="colorNum" data-href="w-huikuangixnagqing.html">回款详情</div>
                                    <div class="redNum" data-href="w-acountzr.html">转让</div>
                                </li>
                            </ul>
                        </div>
                        <div class="fyList row " date-pagination="1" regularType="1" id="1a" page="1">
                            <div class="fylistBtn pre">上一页</div>
                            <div>
                                <ul id="1u">
                                    <li class="fyListBg">1</li>

                                </ul>
                            </div>
                            <div class="fylistBtn next">下一页</div>
                        </div>
                    </div>
                    <!--结束-->
                    <div class="moneyTags" style="display: none">
                        <div class="over3">
                            <div class="height56 font_weight">已结束</div>
                            <div class="ulLeft_list ulLeft_listTop width185px font_14 color6">
                                <ul>
                                    <li>标的信息</li>
                                    <li>投资金额（元）</li>
                                    <li>已回款（元）</li>
                                    <li>累计收益（元）</li>
                                    <li></li>
                                </ul>
                            </div>
                            <div class="ulLeft_list width187ul width185px ulLeft_listHeight58 " id="2">
                                <ul>
                                    <li>
                                        <div class="deco">定宝1020</div>
                                        <div>3个月·12%·先息后本</div>
                                    </li>
                                    <li>1</li>
                                    <li>1</li>
                                    <li>1</li>
                                    <li><span class="colorNum">回款详情</span></li>
                                </ul>
                            </div>
                            <div class="fyList row " date-pagination="2" id="2a" page="1">
                                <div class="fylistBtn pre">上一页</div>
                                <div>
                                    <ul id="2u">
                                        <li class="fyListBg">1</li>
                                    </ul>
                                </div>
                                <div class="fylistBtn next">下一页</div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
<script src="public/js/jquery.min.js"></script>
<!--<script src="fen.js"></script>-->
<!--<script src="public/js/app.js"></script>-->
<!--<script src="public/js/stickUp.js"></script>-->
<script>
    //    obj.runOneGet(1, '1', '1a', '1u', 20);
    //        类型 展示数据id 分页列表id  页码id  页码数量
    var ulList = document.getElementById('moneyTag'), ulLists = ulList.getElementsByTagName('li');
    var divList = document.getElementById('tagList'), divLists = divList.getElementsByClassName('moneyTags');
    ~function bindCard(far, son) {
        for (var i = 0, len = far.length; i < len; i++) {
            ~function (i) {
                far[i].onclick = function (e) {
                    e.stopPropagation()
                    e.returnValue = false;
                    for (var j = 0, len = son.length; j < len; j++) {
                        if (j === i) {
                            far[i].className = "bgOrange";
                            son[i].style.display = 'block';
                            continue;
                        } else {
                            far[j].className = "  pointer ";
                            son[j].style.display = 'none';

                        }
                    }
                }
            }(i)
        }
    }(ulLists, divLists);

    //totlePagerep  回款中   totlePageEnd 结束
    var $ajax = function (url, callback) {
        var xhr = new XMLHttpRequest;
        url.indexOf("?") > -1 ? url += "&_=" + Math.random() : url += "?_=" + Math.random();
        xhr.open("get", url, true);
        xhr.onreadystatechange = function () {
            if (xhr.readyState === 4 && /^2\d{2}$/.test(xhr.status)) {
                var con = xhr.responseText;
                con = JSON.parse(con);
                typeof callback === "function" ? callback(con) : null;
            }
        };
        xhr.send(null);
    };

    var objPage = {
        bindList: function (con, id) {
            var str = "";
            var mapLIst = con.mapListRepayment;
            for (var i = 0; i < mapLIst.length; i++) {
                var cur = mapLIst[i];
                str += '<ul><li>';
                str += '<div class="deco">' + cur.bidTitle + '</div>';
                str += '<div>3个月·12%·先息后本</div></li>';
                str += '<li>' + cur.transferNumber + '</li>';
                str += '<li>' + cur.InvestId + '</li>';
                str += '<li>' + cur.bidInvestAmount + '</li>';
                str += '<li>' + cur.nextRepaymentTime + '</li>';
                str += '<li>' + cur.toRepaymentTime + '</li>';
                str += '<li>';
                str += '<div class="colorNum" data-href="w-huikuangixnagqing.html">回款详情</div>';
                str += '<div class="redNum" data-href="w-acountzr.html">转让</div>';
                str += '</li></ul>';
            }
            var dataList = document.getElementById(id);
            dataList.innerHTML = str;
//           fn(con, id);执行方法
        },
        bindPage: function (pageUId, t, pageId) {
            var str = "";
            if (t >= 9) {
                $('#' + pageUId).css({'width': 33 * t});
                $('#' + pageUId).parent().css({'overflow': 'hidden', 'width': '289px'})
            } else {
                $('#' + pageId).css({'width': 154 + 33 * t});
            }
            for (var i = 1; i <= t; i++) {
                str += "<li>" + i + "</li>";
            }
            document.getElementById(pageUId).innerHTML = str;
        },
        changePage: function (pageUId, pageId, t) {
            var num = $('#' + pageId).attr('page');
            var oLis = document.getElementById(pageUId).getElementsByTagName("li");
            for (var i = 0, len = oLis.length; i < len; i++) {
                if (t > 9) {
                    if (num - 5 >= 0 && t - num >= 4) {
                        $('#' + pageUId).css('left', -32 * (num - 5) + 'px')
                    }
                }
                oLis[i].className = (i + 1) == num ? "fyListBg" : null;
            }
        },
        changeClick: function (id, pageId, pageUId, type, t) {
            var weNum = $('#' + pageId).attr('page');
            document.getElementById(pageId).onclick = function (e) {
                e = e || window.event;
                var tar = e.target || e.srcElement;
                if (tar.tagName.toLowerCase() === "li") {
                    weNum = Number(tar.innerHTML);
                    $('#' + pageId).attr('page', weNum);
                    objPage.runGet(id, pageUId, type, t, pageId);
                    return;
                }
                if (tar.className === "fylistBtn fir") {
                    weNum = 1;
                    $('#' + pageId).attr('page', weNum);
                    objPage.runGet(id, pageUId, type, t, pageId);
                    return;
                }

                if (tar.className === "fylistBtn last") {
                    weNum = t;
                    $('#' + pageId).attr('page', weNum);
                    objPage.runGet(id, pageUId, type, t, pageId);
                    return;
                }

                if (tar.className === "fylistBtn pre") {
                    if (weNum == 1) {
                        return;
                    }
                    weNum--;
                    $('#' + pageId).attr('page', weNum);
                    objPage.runGet(id, pageUId, type, t, pageId);
                    return;
                }

                if (tar.className === "fylistBtn next") {
                    if (weNum == t) {
                        return;
                    }

                    weNum++;
                    $('#' + pageId).attr('page', weNum);
                    objPage.runGet(id, pageUId, type, t, pageId);
                    return;
                }
            }
        },
        runGet: function (id, pageUId, type, t, pageId) {
            $ajax("/myRegularInvsetRepayment?currPage=" + $('#' + pageId).attr('page') + "&regularType=" + type, function (con) {
                      objPage.bindList(con, id);
                      objPage.changePage(pageUId, pageId, t);
                  }
            );
        },
        runOneGet: function (type, id, pageId, pageUId, t) {
            $ajax("/myRegularInvsetRepayment?currPage=" + 1 + "&regularType=" + type, function (con) {
                      objPage.bindList(con, id);
                      objPage.bindPage(pageUId, t, pageId);
                      objPage.changePage(pageUId, pageId, t);
                      objPage.changeClick(id, pageId, pageUId, type, t);
                  }
            )
        }
    }
    $('#t1').click(function () {
                       var obj = new Object(objPage);
                       obj.runOneGet(1, '1', '1a', '1u', 20);
                       $('#t1').unbind('click')
                   }
    )
    $('#t2').click(function () {
                       var obj = new Object(objPage);
                       obj.runOneGet(1, '2', '2a', '2u', 6)
                       $('#t2').unbind('click')
                   }
    )
    function fn(con, id) {

    }
    function fyList() {
        var str = '';
        str += '<div class="fylistBtn">上一页</div><div>';
        str += '<ul><li class="fyListBg">1</li>';
        str += '<li>2</li>';
        str += '<li>3</li>';
        str += '<li>4</li>';
        str += '<li>5</li>';
        str += '<li>6</li>';
        str += '<li>7</li>';
        str += '<li>8</li>';
        str += '<li>9</li>';
        str += '</ul></div>';
        str += '<div class="fylistBtn">下一页</div>';
    }
</script>
</body>
</html>